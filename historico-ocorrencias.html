<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADM - NOAR</title>
    <link rel="stylesheet" href="CSS/menu-adm.css" type="text/css">
    <link rel="icon" href="IMAGENS/logo_medicina.png" type="image/png">
</head>
<body>

    <div class="blackbg" id="blackbg" style="display: none;" onclick="blackBgNone()"></div>

    <div id="painelEdicao" class="painel-edicao" style="display: none;">
        <h2 style="text-align: center;">Editar dados</h2>
        <form action="PHP/processar_dados.php" method="post" id="formulario">
            <label for="tabela">Selecionar Tabela:</label>
            <select name="tabela" id="tabela">
                <option>Selecionar Tabela</option>
                <option value="tabela_paciente">Tabela Paciente</option>
                <option value="anamnese">Anamnese</option>
                <option value="anamnese_gestacional">Anamnese Gestacional</option>
                <option value="avaliacao_cinematica">Avaliacao Cinematica</option>
                <option value="avaliacao_paciente_maior">Avaliacao Paciente Maior</option>
                <option value="avaliacao_paciente_menor">Avaliacao Paciente Menor</option>
                <option value="decisao_transporte">Decisao de Transporte</option>
                <option value="emergencias">Emergências</option>
                <option value="forma_conducao">Forma de Conducao</option>
                <option value="localizacao_traumas">Localizacao de Traumas</option>
                <option value="materiais_utilizados_deixados_hospital">Materiais Utilizados Deixados no Hospital</option>
                <option value="material_utilizados_descartavel">Materiais Utilizados Descartaveis</option>
                <option value="objetos_recolhidos">Objetos Recolhidos</option>
                <option value="observacoes_importantes">Observacoes Importantes</option>
                <option value="problemas_suspeitos">Problemas Suspeitos</option>
                <option value="procedimentos_efetuados">Procedimentos Efetuados</option>
                <option value="sinais_e_sintomas">Sinais e Sintomas</option>
                <option value="sinais_vitais">Sinais Vitais</option>

                <!-- Adicione outras opcões para as outras tabelas -->
            </select><br><br>

            <label for="coluna">Selecionar Coluna:</label>
            <select name="coluna" id="coluna">
                <!-- As opções serao carregadas dinamicamente aqui -->
            </select><br><br>

            <label for="novo_valor">Novo Valor:</label>
            <input type="text" name="novo_valor" id="novo_valor"><br><br>
            
            <input type="hidden" id="idPaciente" value="" name="id_paciente">
            <input type="submit" value="Atualizar">
        </form>
    </div>

    <div id="barra-Lateral coluna" class="barra-Lateral" style="left: -220px;">
        <!-- margin-top: 2px; width: 200px; height: 190px; position: absolute; left: 80px; top: 75%;-->  
        <div class="quadrado centro "  style=" display: flex; background-color: rgba(0, 0, 0, 0.681); border-color: #000000; border-width: 2px; border: solid;"> 
                 <!-- <div class="circulo" id="foto_usu" style="width: 100px; height: 100px; border-color: #ffff;margin-bottom: 20px;"></div> -->
                <div style=" font-size: 15px; color: white; margin-right: 65px;">
                    <span id="nome_que_vai_vir"style="word-break: break-all; word-wrap: break-word; " ></span>
                </div>
            </label>
        </div>     
    </div>
    
    <div class="menu-lateral">
        <div class="coluna centro" style="height: 10vh; width: 80px;">
            <div class="centro" style="width: 50px; height: 50px; "> <a href="adm-menu.html"> <img src="IMAGENS/home.png" width="35px"> </a>  </div>
        </div>
        <div class="coluna justify" style="height: 79vh; width: 80px; margin-top: 1vh;">
            <div class="centro" style="width: 50px; height: 50px;  margin-top: 20px;"><a href="historico-ocorrencias.html"><img src="IMAGENS/ficha.png" width="35px"></a></div>
            
        </div> 
        <div class="coluna justify" style="height: 9vh; width: 80px; margin-top: 1vh;">
            <div class="centro " style="width: 50px; height: 50px; "><img class="menu-icon" src="IMAGENS/user.png" width="35px"></div>
        </div>
     
    </div>
    <div class="bloco-principal centro">


        <!--CABECALHO-->
        <div class="cabecalho justify" style="justify-content: space-between">
            <span>Ocorrências</span>
            <button onclick="logout()" style="border: none; background-color: transparent; font-size: 18px; cursor: pointer">Sair</button>
        </div>
        <!--FIM CABECALHO-->


        <!--BLOCO BRANCO-->
        <div class="bloco-branco">

        </div>
        <!--FIM BLOCO BRANCO-->


        <!--BLOCO CINZA-->
        <div class="bloco-cinza">
        

            <!--BlOCO DE PESQUISA-->
            <div class="justify" style="width: 1200px; justify-content: space-between;">

                <!-- <div class="pesquisa-usuario justify">
                    <div class="justify" style="border: 2px solid gray; background-color: white; border-radius: 5px;">
                        <input id="inputPesquisaBombeiro" onkeypress="realizarPesquisaEnter(event)" type="text" class="input-text" style="border:none; background-color: transparent;">
                        <button id="botaoPesquisaBombeiro" onclick="realizarPesquisa()" style=" width: 40px; border: none; height: 36px; background-color: transparent; cursor: pointer;">
                            <div class="centro" style="border:none;  width: 30px; height: 30px;">
                                <img src="IMAGENS/lupa.png" width="15px">
                            </div>
                        </button>
                    </div>
                    <select id="selectPesquisaBombeiro" style="width: 80px; height: 40px; border: 2px solid gray; border-radius: 5px; background-color: white; outline: none; margin-left: 10px;">
                        <option value="opcao_nada">Selecionar</option>
                        <option value="opcao_nome">Nome</option>
                        <option value="opcao_data">data</option>
                        <option value="opcao_codigo">codigo</option>
                        <option value="opcao_bombeiro">bombeiro</option>
                    </select>
                </div> -->
                <div class="justify">
                    <select id="select_adm" onchange="executarSelect()" style="width: 80px; height: 40px; border: 2px solid gray; border-radius: 5px; background-color: white; outline: none; margin-left: 10px;">
                        <option value="opcao_nada"></option>
                        <option value="opcao_nome">Nome</option>
                        <option value="opcao_data">Data</option>
                    </select>
                    <button onclick="MudarOrdemRegistro()" style="width: 30px; height: 30px; border: 1px solid gray; border-radius: 5px; margin-left: 10px;">
                        <img src="IMAGENS/a-z.png" width="100%">
                    </button>
                </div>
                
            </div>
            <!--FIM BlOCO DE PESQUISA-->


            <!--EDIÇÃO GERAL-->
            <label style="margin-top: 20px; font-size: 20px;">Adicionar/Editar Paciente/Excluir</label>
            <div class="linha-tabela justify">
                <div class="space-evenly" style="width: 800px;">
                    <input class="input-text" placeholder="Nome" id="nome_geral">
                    <input class="input-text" placeholder="Registro" id="registro_geral">
                </div>
                <div class="space-evenly justify" style="width: 250px ;height: 100%; float: right;">
                    <button class="centro" style="border:1px solid black; width: 20px; height: 20px;  background-color: rgb(40, 221, 4);" onclick="AdicionarGeral()"><img src="IMAGENS/Confirm.png" width="15px"></button>
                    
                    <div class="centro" style="border: 1px solid black; width: 20px; height: 20px; background-color: rgb(230, 154, 12); display: inline-block; position: relative;">
                        <select onclick="valueSelectEdicaoGeral(this)" onchange="selecionarOpcaoEditarGeral(this)" style="opacity: 0; width: 100%; height: 100%; position: absolute; top: 0; left: 0; cursor: pointer;">
                            <option selected disabled hidden></option>
                            <option style="background-color: rgb(230, 154, 12)" value="editar"><img src="IMAGENS/edit.png" width="15px"></option>
                            <option value="nome" style="background-color: rgb(230, 154, 12)">Editar Nome</option>
                            <option value="avancado" style="background-color: rgb(230, 154, 12)">Edição Avançada</option>
                        </select>
                        <img src="IMAGENS/edit.png" width="15px" style="pointer-events: none; margin-left: 20%;">
                    </div>
                                        
                    <button class="centro" style="border:1px solid black; width: 20px; height: 20px;  background-color: rgb(199, 114, 114);" onclick="ExcluirGeral(0)"><img src="IMAGENS/lixo.png" width="13px"></button>
                </div>
            </div>
            <!--FIM EDIÇÃO GERAL-->


            <!--REGISTROS DOS USUARIOS-->


            <div class="linha-tabela justify" style="margin-top: 20px;background-color: rgb(63, 177, 139);">
                <div class="space-evenly" style="width: 900px;">
                    <input style="font-size: 20px;" class="input-text-usuario" value="Nome" readonly><div style="width: 1px; height: 52px; background-color: black;"></div>
                    <input style="font-size: 20px;" class="input-text-usuario" value="data" readonly><div style="width: 1px; height: 52px; background-color: black;"></div>
                    <input style="font-size: 20px;" class="input-text-usuario" value="Código" readonly><div style="width: 1px; height: 52px; background-color: black;"></div>
                    <input style="font-size: 20px;" class="input-text-usuario" value="Bombeiro" readonly><div style="width: 1px; height: 52px; background-color: black;"></div>
                </div>
            </div>

            <div class="exibir">

                <div id="' + result[i].cpf_paciente + '" class="linha-tabela justify div-pai"><div class="space-evenly" style="width: 900px;"><input class="input-text-usuario" value="' + result[i].nome_paciente + '" id="nomeEspecifico' + result[i].cpf_paciente + '" readonly><div style="width: 1px; height: 52px; background-color: black;"></div><input class="input-text-usuario" value="' + result[i].data_paciente + '" readonly><div style="width: 1px; height: 52px; background-color: black;"></div><input class="input-text-usuario" value="' + result[i].cpf_paciente + '" id="codeEspecifico' + result[i].cpf_paciente + '" readonly><div style="width: 1px; height: 52px; background-color: black;"></div><input class="input-text-usuario" value="' + result[i].bombeiro + '" readonly><div style="width: 1px; height: 52px; background-color: black;"></div></div><div class="space-evenly justify" style="width: 250px ;height: 100%; float: right;"><button onclick="DadosPDF(' + result[i].cpf_paciente +' + ', ' + ' + result[i].bombeiro + ')" style = "width: 25px; height: 25px; display: flex; justify-content: center; justify-items: center; align-items: center; align-content: center; background-color: rgba(255, 255, 255, 0); border: none; cursor: pointer;"><img src="IMAGENS/ficha.png" width="22px"></button><button class="centro" onclick="editarNomeEspecifico(' + result[i].cpf_paciente + ')" style="border:1px solid black; width: 20px; height: 20px;  background-color: rgb(230, 154, 12);"><img src="IMAGENS/edit.png" width="15px"></button><button class="centro" onclick="ExcluirGeral(' + result[i].cpf_paciente + ')" style="border:1px solid black; width: 20px; height: 20px;  background-color: rgb(199, 114, 114);"><img src="IMAGENS/lixo.png" width="13px"></button></div></div>
            
            </div>

            <!--FIM REGISTROS DOS USUARIOS-->


        </div>
        <!--FIM BLOCO CINZA-->
        
</body>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="JS/adm-paciente.js"></script>
<script src="JS/gerarPDF.js"></script>
<script src='https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js'></script>
<script src='https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.2.4/jspdf.plugin.autotable.min.js'></script>
<script>
    $(document).ready(function() {
        $('#formulario').submit(function(e) {
            e.preventDefault(); // Evita o envio do formulário padrao

            $.ajax({
                url: $(this).attr('action'),
                type: 'POST',
                data: $(this).serialize(),
                success: function(response) {
                    if (response.success) {
                        alert(response.message); // Exibe mensagem de sucesso como alerta
                    } else {
                        alert(response.message); // Exibe mensagem de erro como alerta
                    }
                },
                error: function() {
                    alert('Ocorreu um erro ao processar a requisição.');
                }
            });
        });

        // Script para carregar as colunas dinamicamente quando a tabela é alterada
        $('#tabela').change(function() {
            var tabelaSelecionada = $(this).val();
            $.ajax({
                url: 'PHP/carregar_colunas.php',
                type: 'POST',
                data: { tabela: tabelaSelecionada },
                success: function(response) {
                    $('#coluna').html(response);
                }
            });
        });
    });
</script>
</html>
